<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Phở</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 500px; margin: auto; }
        .menu-item { display: flex; flex-direction: column; padding: 10px; border-bottom: 1px solid #ccc; }
        .menu-item span { font-weight: bold; }
        .order { margin-top: 20px; padding: 10px; border-top: 2px solid black; }
        .done { background: #ddd; }
        .table-buttons, .quantity-buttons { margin-top: 10px; }
        .table-buttons span, .quantity-buttons span { font-weight: bold; display: block; margin-bottom: 5px; }
        .table-buttons button, .quantity-buttons button { margin: 2px; }
        .note { width: 100%; margin-top: 5px; }
    </style>
</head>
<body>
    <h1>Đặt món Phở</h1>
    <div id="menu"></div>
    <textarea id="orderNote" class="note" placeholder="Ghi chú cho đơn hàng..."></textarea>
    <div class="table-buttons" id="tableButtons">
        <span>Bàn:</span>
    </div>
    <button onclick="placeOrder()">Đặt món</button>
    <h2>Danh sách đơn</h2>
    <div id="orders"></div>

    <script>
        const menu = [
            { name: "Tái gầu", quantity: 0, note: "", customPrice: "" },
            { name: "Bắp", quantity: 0, note: "", customPrice: "" },
            { name: "Sốt vang", quantity: 0, note: "", customPrice: "" }
        ];
        let orders = [];
        let selectedTable = null;

        function createTableButtons() {
            const tableDiv = document.getElementById("tableButtons");
            for (let i = 1; i <= 26; i++) {
                const btn = document.createElement("button");
                btn.innerText = i;
                btn.onclick = () => { selectedTable = i; alert("Chọn bàn: " + i); };
                tableDiv.appendChild(btn);
            }
        }

        function updateMenu() {
            const menuDiv = document.getElementById("menu");
            menuDiv.innerHTML = "<div><strong>Tên món | Ghi chú</strong></div>";
            menu.forEach((item, index) => {
                menuDiv.innerHTML += `
                    <div class="menu-item">
                        <span>${item.name}</span>
                        <div class="quantity-buttons" id="quantityButtons${index}">
                            <span>Số lượng:</span>
                        </div>
                        <div>
                            <span>Ghi chú:</span>
                            <select onchange="setNote(${index}, this.value)">
                                <option value="">Chọn ghi chú</option>
                                <option value="Nhiều bánh">Nhiều bánh</option>
                                <option value="Ít bánh">Ít bánh</option>
                                <option value="Hành củ">Hành củ</option>
                                <option value="Nhiều hành">Nhiều hành</option>
                                <option value="Rau mùi">Rau mùi</option>
                                <option value="custom">Giá: nhập giá khác</option>
                                <option value="other">Ghi chú khác</option>
                            </select>
                            <input type="text" id="customPrice${index}" placeholder="Nhập giá" style="display:none;" onchange="setCustomPrice(${index}, this.value)">
                        </div>
                    </div>`;
            });
            menu.forEach((_, index) => createQuantityButtons(index));
        }

        function createQuantityButtons(index) {
            const quantityDiv = document.getElementById(`quantityButtons${index}`);
            quantityDiv.innerHTML = "";
            for (let i = 0; i <= 10; i++) {
                const btn = document.createElement("button");
                btn.innerText = i;
                btn.onclick = () => {
                    menu[index].quantity = i;
                    updateMenu();
                };
                if (menu[index].quantity === i) {
                    btn.style.background = "lightblue";
                }
                quantityDiv.appendChild(btn);
            }
        }

        function setNote(index, value) {
            menu[index].note = value;
            if (value === "custom") {
                document.getElementById(`customPrice${index}`).style.display = "block";
            } else {
                document.getElementById(`customPrice${index}`).style.display = "none";
                menu[index].customPrice = "";
            }
        }

        function setCustomPrice(index, value) {
            menu[index].customPrice = value;
        }

        function placeOrder() {
            const orderItems = menu.filter(item => item.quantity > 0);
            if (orderItems.length === 0) return alert("Chưa chọn món nào!");
            const orderNote = document.getElementById("orderNote").value;
            const newOrder = { id: Date.now(), table: selectedTable || "Không có bàn", items: JSON.parse(JSON.stringify(orderItems)), done: false, note: orderNote };
            orders.unshift(newOrder);
            if (orders.length > 100) orders.pop();
            menu.forEach(item => { item.quantity = 0; item.note = ""; item.customPrice = ""; });
            document.getElementById("orderNote").value = "";
            updateMenu();
            updateOrders();
        }

        function updateOrders() {
            const ordersDiv = document.getElementById("orders");
            ordersDiv.innerHTML = "";
            orders.forEach((order, index) => {
                ordersDiv.innerHTML += `
                    <div class="order ${order.done ? 'done' : ''}">
                        <p><strong>Đơn #${orders.length - index} - Bàn ${order.table}</strong></p>
                        <ul>${order.items.map(item => `<li>${item.name} x ${item.quantity}${item.note ? ` (${item.note})` : ""}${item.customPrice ? ` - Giá: ${item.customPrice}` : ""}</li>`).join('')}</ul>
                        <p><strong>Ghi chú đơn:</strong> ${order.note}</p>
                        ${!order.done ? `<button onclick="markDone(${order.id})">Hoàn thành</button> <button onclick="editOrder(${order.id})">Chỉnh sửa</button>` : ''}
                    </div>`;
            });
        }

        function markDone(id) {
            orders = orders.map(order => order.id === id ? { ...order, done: true } : order);
            updateOrders();
        }

        createTableButtons();
        updateMenu();
    </script>
</body>
</html>